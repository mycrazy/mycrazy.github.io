<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="iOS-java-记录自己学习的过程"><title>carthage笔记 | Mycrazy的博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.1.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">carthage笔记</h1><a id="logo" href="/.">Mycrazy的博客</a><p class="description">You have a dream, you got to protect it.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">carthage笔记</h1><div class="post-meta">Jun 17, 2016<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2016/06/17/Carthage笔记/" href="/2016/06/17/Carthage笔记/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>title: carthage笔记</p>
<h2 id="tags"><a href="#tags" class="headerlink" title="tags:"></a>tags:</h2><p><strong>Carthage笔记</strong></p>
<p>在iOS开发中使用到很多的第三方库，由此诞生了专门管理第三方的包管理工具。<br>比较流行的包管理工具CocoaPods大的，不得不说它是一个强工具。最近新项目<br>中使用了新的包管理工具Carthage,它灵活，轻便的特点对项目的开发还是很有好处。</p>
<p>CoaoaPods 是一套整体解决方案，我们在 Podfile 中指定好我们需要的第三方库。然后 CocoaPods 就会进行下载，集成，然后修改或者创建我们项目的 workspace 文件，这一系列整体操作。</p>
<p>相比之下，Carthage 就要轻量很多，它也会一个叫做 Cartfile 描述文件，但 Carthage 不会对我们的项目结构进行任何修改，更不多创建workspace。它只是根据我们描述文件中配置的第三方库，将他们下载到本地，然后使用 xcodebuild 构建成 framework 文件。然后由我们自己将这些库集成到项目中。Carthage 使用的是一种非侵入性的哲学。</p>
<p>所谓非侵入性哲学，其实可以这么理解。我想使用过 CocoaPods 的同学们，可能都会经历过这样一种体验，尤其是在最开始使用它的时候 - 我们精心在 Podfile 中配置好我们所需的第三方库，并且按照 CocoaPods 的指定步骤，输入命令，然后等待这些第三方库乖乖的集成到项目中。但总有那么几次，会事与愿违，比如运行完 pod update 命令，看似一切顺利，workspace 也成功的更新了。但当我们真正编译构建项目的时候，某些莫名其妙的错误出现了，类似于这种：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">diff: /../Podfile.lock: No such file or directory</span><br><span class="line">diff: /Manifest.lock: No such file or directory</span><br></pre></td></tr></table></figure>
<p>本来我们使用包管理，就是为了集成第三方库的时候更加方便，迅速。结果处理这些包管理的错误却又浪费了我们很多时间。<br>这与我们使用包管理的初衷可以说是完全相悖。<br>如果使用 Carthage 我们就不必让这些问题困扰了，因为 Carthage 本身不会对我们的项目结构进行任何改动，类似 CocoaPods 产生的这些附加问题，就不会发生了。</p>
<p>但是俗话说：有得必有失。Carthage就没有CocoaPods那样简单方便的集成能力了。我们必须手动将第三方关联到项目中。<br>在Carthage框架的说明中明确的说明了Carthage的功能。Carthage不会自动更改我们工程文件和我们的设置。<br><strong>Carthage builds your dependencies and provides you with binary frameworks, but you retain full control over your project structure and setup. Carthage does not automatically modify your project files or your build settings.</strong></p>
<p><strong>安装Carthage</strong></p>
<p>首先我们需要安装 Carthage 环境，地址在这里<a href="https://github.com/Carthage/Carthage" target="_blank" rel="external">Carthage官网</a><br>最新的版本是0.16.2，如下图<br><img src="/images/Carthage/carthage_version.png"></p>
<p>直接下载对应的Carthage.pkg文件，点击安装<br><img src="/images/Carthage/Carthage_安装.png"></p>
<p>如果你是Xcode7以后版本，你也可以使用 Homebrew（<a href="http://digitizor.com/install-homebrew-osx-el-capitan/" target="_blank" rel="external">mac上安装Homebrew</a>） 安装Carthage到你的电脑，然后运行<strong>brew update</strong> 和 <strong>brew install carthage</strong>命令即可。</p>
<p><strong>使用Carthage</strong></p>
<p>使用Carthage 支持<strong>macOS，iOS，tvOS, or watchOS</strong>。<br>对于iOS来书，Carthage目前只支持dynamic frameworks（注意：动态框架与iOS7不兼容）所以只能支持iOS8+。</p>
<p>以常用的SDWebImage为例，进行安装使用</p>
<ul>
<li>进入工程目录，在命令行中使用<strong>vim Cartfile</strong>命令新建Cartfile文件</li>
<li>添加 <strong>github “rs/SDWebImage”</strong> （具体的第三方库名称可能有出入，刚开始我使用github “SDWebImage”后来进入到SDWebImage官网上看原来需要rs/SDWebImage）</li>
<li>执行<strong>carthage update</strong>命令<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*** Fetching SDWebImage</span><br><span class="line">*** Checking out SDWebImage at &quot;3.8.1&quot;</span><br><span class="line">*** xcodebuild output can be found in /var/folders/0v/p654mkdd7675pkhklj5xscfh0000gn/T/carthage-xcodebuild.H8H43f.log</span><br><span class="line">*** Building scheme &quot;WebImage tvOS&quot; in SDWebImage.xcworkspace</span><br><span class="line">*** Building scheme &quot;WebImage&quot; in SDWebImage.xcworkspace</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>update 操作完成后，会在项目的根目录中生成一个 Carthage 目录。这个目录中又包含了两个目录 Build 和 Checkout。<br>Build放的是构建好的 framework 包：<br><img src="/images/Carthage/carthage_生成文件.png"></p>
<p>Checkout放的是第三方库的项目源文件，源文件不能删除，否则在你debug的时候无法进入到框架实现中。<br><img src="/images/Carthage/Carthage_源文件.png"></p>
<p>然后在项目设置General选项卡的Linked Frameworks and Libraries中，将Carthage/Build/iOS中的framework 文件添加到项目中：<br><img src="/images/Carthage/Carthage_加入general.png"></p>
<p>这些设置之后就将WebImage这个框架加入到我们的工程中了。</p>
<p><strong>错误总结</strong></p>
<p>在执行<strong>carthage update</strong>命令报如下错误<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">*** Cloning SDWebImage</span><br><span class="line">*** Checking out SDWebImage at &quot;3.8.1&quot;</span><br><span class="line">*** xcodebuild output can be found in /var/folders/0v/p654mkdd7675pkhklj5xscfh0000gn/T/carthage-xcodebuild.2oLHdm.log</span><br><span class="line">*** Building scheme &quot;WebImage tvOS&quot; in SDWebImage.xcworkspace</span><br><span class="line">2016-06-17 10:05:45.212 xcodebuild[6230:1170548] [MT] PluginLoading: Required plug-in compatibility UUID F41BD31E-2683-44B8-AE7F-5F09E919790E for plug-in at path &apos;~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/RealmBrowser.xcplugin&apos; not present in DVTPlugInCompatibilityUUIDs</span><br><span class="line">2016-06-17 10:05:52.857 xcodebuild[6341:1170824] [MT] PluginLoading: Required plug-in compatibility UUID F41BD31E-2683-44B8-AE7F-5F09E919790E for plug-in at path &apos;~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/RealmBrowser.xcplugin&apos; not present in DVTPlugInCompatibilityUUIDs</span><br><span class="line">*** Building scheme &quot;WebImage&quot; in SDWebImage.xcworkspace</span><br><span class="line">2016-06-17 10:06:05.574 xcodebuild[6466:1171174] [MT] PluginLoading: Required plug-in compatibility UUID F41BD31E-2683-44B8-AE7F-5F09E919790E for plug-in at path &apos;~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/RealmBrowser.xcplugin&apos; not present in DVTPlugInCompatibilityUUIDs</span><br><span class="line">2016-06-17 10:06:15.221 xcodebuild[6646:1171541] [MT] PluginLoading: Required plug-in compatibility UUID F41BD31E-2683-44B8-AE7F-5F09E919790E for plug-in at path &apos;~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/RealmBrowser.xcplugin&apos; not present in DVTPlugInCompatibilityUUIDs</span><br></pre></td></tr></table></figure></p>
<p><strong>解决方法</strong></p>
<p>原因是当前的xcode版本不支持RealmBrowser.xcplugin插件。</p>
<ul>
<li><p>1.直接暂时先从Xcode中移除RealmBrowser.xcplugin插件</p>
</li>
<li><p>2.在命令行中执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open -a Xcode ~/Library/Application\ Support/Developer/Shared/Xcode/Plug-ins/RealmBrowser.xcplugin/Contents/Info.plist</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>会在xcode中打开该插件对应的配置文件，添加对应的xcode的UUId即可。<br>图片</p>
<p><a href="http://stackoverflow.com/questions/34333562/alamofire-error-on-carthage-update" target="_blank" rel="external">参考地址</a></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="https://mycrazy.github.io/2016/06/17/Carthage笔记/" data-id="cipjd8qyn0000w75wb0yzvsxp" class="article-share-link">分享到</a><div class="tags"></div><div class="post-nav"><a href="/2016/06/17/realm笔记/" class="next">realm 笔记</a></div><div id="disqus_thread"><script>var disqus_shortname = 'mycrazy';
var disqus_identifier = '2016/06/17/Carthage笔记/';
var disqus_title = 'carthage笔记';
var disqus_url = 'https://mycrazy.github.io/2016/06/17/Carthage笔记/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//mycrazy.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="https://mycrazy.github.io"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/日志/">日志</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/日志/第一天/">第一天</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂七杂八/">杂七杂八</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/日记/" style="font-size: 15px;">日记</a> <a href="/tags/开始/" style="font-size: 15px;">开始</a> <a href="/tags/我/" style="font-size: 15px;">我</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/06/17/Carthage笔记/">carthage笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/17/realm笔记/">realm 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/14/hexo搭建个人博客/">hexo搭建博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/14/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/13/new-post/">new post</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//mycrazy.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.jianshu.com/users/4c436593f10b/latest_articles" title="一点一滴" target="_blank">一点一滴</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Mycrazy的博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>